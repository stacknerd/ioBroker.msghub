/* tab.css â€” MsgHub Admin Tab base styles (scoped to .msghub-root)
 *
 * Governance:
 * - Base only: tokens + generic rules used across panels/modules
 * - No panel-specific styling here (use tab.<panel>.css / tab.<panel>.<module>.css)
 * - Keep it boring: prioritize density, legibility, and consistency with ioBroker Admin
 */

.msghub-root {
	/* Theme tokens (keep minimal; panels/modules consume these) */
	--msghub-bg: rgb(255 255 255);
	--msghub-text: rgb(0 0 0 / 0.87);
	--msghub-muted: rgb(0 0 0 / 0.6);
	--msghub-backdrop: rgb(140 140 140 / 0.55);

	--msghub-border: rgb(0 0 0 / 0.12);
	--msghub-border-light: rgb(0 0 0 / 0.08);

	--msghub-accent: rgb(51 153 204);
	--msghub-ok: rgb(38 166 154);
	--msghub-ok-dim: rgb(38 166 154 / 0.1);
	--msghub-warning: rgb(230 145 56);
	--msghub-warning-dim: rgb(230 145 56 / 0.1);
	--msghub-danger: rgb(211 47 47);
	--msghub-danger-dim: rgb(211 47 47 / 0.1);

	/* Chart palette (data viz; used by stats panel). */
	--msghub-chart-1: rgb(38 166 154);
	--msghub-chart-2: rgb(66 165 245);
	--msghub-chart-3: rgb(171 71 188);
	--msghub-chart-4: rgb(255 167 38);
	--msghub-chart-5: rgb(239 83 80);
	--msghub-chart-6: rgb(141 110 99);
	--msghub-chart-7: rgb(38 198 218);
	--msghub-chart-8: rgb(124 179 66);
	--msghub-chart-9: rgb(255 112 67);
	--msghub-chart-10: rgb(92 107 192);
	--msghub-chart-11: rgb(216 27 96);
	--msghub-chart-12: rgb(253 216 53);
	--msghub-chart-neutral: rgb(207 216 220);

	/* Syntax highlighting (message JSON viewer). */
	--msghub-syntax-key: rgb(4 81 165);
	--msghub-syntax-string: rgb(163 21 21);
	--msghub-syntax-number: rgb(9 134 88);
	--msghub-syntax-bool: rgb(0 0 255);
	--msghub-syntax-null: rgb(0 0 255);
	--msghub-syntax-punct: rgb(0 0 0);
	--msghub-syntax-comment: rgb(0 128 0);

		/* Icons (CSS mask; color via currentColor). */
		--msghub-icon-open-json: url("data:image/svg+xml,%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%200.32%200.32%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23000000%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0.12%200.06V0.04h-0.002q-0.009%200%20-0.018%200.004a0.046%200.046%200%200%200%20-0.016%200.011%200.044%200.044%200%200%200%20-0.01%200.015v0a0.07%200.07%200%200%200%20-0.004%200.017v0a0.12%200.12%200%200%200%200%200.017q0%200.009%200%200.017%200%200.006%20-0.002%200.011v0a0.03%200.03%200%200%201%20-0.015%200.016%200.028%200.028%200%200%201%20-0.011%200.002H0.04v0.02h0.002q0.006%200%200.011%200.002l0%200q0.005%200.002%200.009%200.006l0%200q0.004%200.004%200.006%200.009l0%200q0.002%200.005%200.002%200.011%200%200.009%200%200.017%200%200.009%200%200.017v0q0.001%200.009%200.004%200.016v0q0.003%200.008%200.01%200.015%200.007%200.007%200.016%200.011t0.018%200.004H0.12v-0.02h-0.002q-0.006%200%20-0.011%20-0.002a0.032%200.032%200%200%201%20-0.009%20-0.006%200.034%200.034%200%200%201%20-0.006%20-0.009q-0.002%20-0.005%20-0.002%20-0.011%200%20-0.007%200%20-0.013%200%20-0.007%200%20-0.013a0.1%200.1%200%200%200%20-0.001%20-0.013%200.054%200.054%200%200%200%20-0.003%20-0.012A0.046%200.046%200%200%200%200.07%200.16a0.046%200.046%200%200%200%200.015%20-0.019q0.002%20-0.006%200.003%20-0.012%200.001%20-0.006%200.001%20-0.013%200%20-0.007%200%20-0.013t0%20-0.014a0.029%200.029%200%200%201%200.018%20-0.027%200.026%200.026%200%200%201%200.011%20-0.002zm0.08%200.201V0.28h0.002q0.009%200%200.018%20-0.004t0.016%20-0.011%200.01%20-0.015v0q0.003%20-0.008%200.004%20-0.017v0q0.001%20-0.008%200%20-0.017%200%20-0.009%200%20-0.017%200%20-0.006%200.002%20-0.011v0a0.03%200.03%200%200%201%200.015%20-0.016%200.028%200.028%200%200%201%200.011%20-0.002H0.28v-0.02h-0.002q-0.006%200%20-0.011%20-0.002l0%200a0.028%200.028%200%200%201%20-0.009%20-0.006l0%200a0.028%200.028%200%200%201%20-0.006%20-0.009v0a0.028%200.028%200%200%201%20-0.002%20-0.011q0%20-0.009%200%20-0.017a0.12%200.12%200%200%200%200%20-0.017v0a0.07%200.07%200%200%200%20-0.004%20-0.016v0a0.044%200.044%200%200%200%20-0.01%20-0.015%200.046%200.046%200%200%200%20-0.016%20-0.011%200.046%200.046%200%200%200%20-0.018%20-0.004H0.2v0.02h0.002q0.006%200%200.011%200.002%200.005%200.002%200.009%200.006%200.004%200.004%200.006%200.009%200.002%200.005%200.002%200.011%200%200.007%200%200.013%200%200.007%200%200.013%200%200.007%200.001%200.013%200.001%200.006%200.003%200.012a0.046%200.046%200%200%200%200.015%200.019%200.046%200.046%200%200%200%20-0.015%200.019%200.054%200.054%200%200%200%20-0.003%200.012q-0.001%200.006%20-0.001%200.013a0.18%200.18%200%200%200%200%200.013q0%200.007%200%200.014a0.029%200.029%200%200%201%20-0.018%200.027%200.026%200.026%200%200%201%20-0.011%200.002z%22%2F%3E%3C%2Fsvg%3E");
		--msghub-icon-open-archive: url("data:image/svg+xml,%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2016%2016%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22currentColor%22%20class%3D%22bi%20bi-archive%22%3E%3Cpath%20d%3D%22M0%202a1%201%200%200%201%201-1h14a1%201%200%200%201%201%201v2a1%201%200%200%201-1%201v7.5a2.5%202.5%200%200%201-2.5%202.5h-9A2.5%202.5%200%200%201%201%2012.5V5a1%201%200%200%201-1-1V2zm2%203v7.5A1.5%201.5%200%200%200%203.5%2014h9a1.5%201.5%200%200%200%201.5-1.5V5H2zm13-3H1v2h14V2zM5%207.5a.5.5%200%200%201%20.5-.5h5a.5.5%200%200%201%200%201h-5a.5.5%200%200%201-.5-.5z%22%2F%3E%3C%2Fsvg%3E");

	/* Typography (central presets; avoid ad-hoc font-weight/size usage) */
	--msghub-font-sans:
		system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
	--msghub-font-mono:
		ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;

	--msghub-fw-light: 400;
	--msghub-fw-med: 600;
	--msghub-fw-bold: 700;

	--msghub-fs-sm: 12px;
	--msghub-fs-md: 14px;
	--msghub-fs-lg: 16px;
	--msghub-fs-xl: 18px;

	--msghub-lh-tight: 1.2;
	--msghub-lh-normal: 1.4;
	--msghub-lh-solid: 1;

	--msghub-font-header: normal var(--msghub-fw-bold) var(--msghub-fs-xl) / var(--msghub-lh-normal)
		var(--msghub-font-sans);
	--msghub-font-body: normal var(--msghub-fw-light) var(--msghub-fs-md) / var(--msghub-lh-normal)
		var(--msghub-font-sans);
	--msghub-font-body-bold: normal var(--msghub-fw-med) var(--msghub-fs-md) / var(--msghub-lh-normal)
		var(--msghub-font-sans);
	--msghub-font-body-meta: italic var(--msghub-fw-light) var(--msghub-fs-md) / var(--msghub-lh-normal)
		var(--msghub-font-sans);
	--msghub-font-tab: normal var(--msghub-fw-med) var(--msghub-fs-lg) / var(--msghub-lh-tight) var(--msghub-font-sans);
	--msghub-font-badge: normal var(--msghub-fw-bold) var(--msghub-fs-sm) / var(--msghub-lh-solid)
		var(--msghub-font-sans);

	/* Surfaces / effects (keep all color literals in this token section) */
	--msghub-surface-hover: rgb(0 0 0 / 0.04);
	--msghub-surface-selected: rgb(0 0 0 / 0.07);
	--msghub-shadow-md: rgb(0 0 0 / 0.16);
	--msghub-shadow-elevated: 0 10px 28px var(--msghub-shadow-md);

	--msghub-radius: 4px;

	/* Density (base scale; can be overridden centrally later) */
	--msghub-space-1: 4px;
	--msghub-space-2: 6px;
	--msghub-space-3: 10px;
	--msghub-space-4: 14px;
}

html[data-msghub-theme='dark'] .msghub-root {
	--msghub-bg: rgb(18 18 18);
	--msghub-text: rgb(255 255 255 / 0.88);
	--msghub-muted: rgb(255 255 255 / 0.64);
	--msghub-backdrop: rgb(0 0 0 / 0.65);

	--msghub-border: rgb(255 255 255 / 0.08);
	--msghub-border-light: rgb(255 255 255 / 0.06);

	--msghub-accent: rgb(51 153 204);
	--msghub-ok: rgb(45 212 191);
	--msghub-ok-dim: rgb(45 212 191 / 0.14);
	--msghub-warning: rgb(255 170 90);
	--msghub-warning-dim: rgb(255 170 90 / 0.16);
	--msghub-danger: rgb(239 83 80);
	--msghub-danger-dim: rgb(239 83 80 / 0.14);

	--msghub-chart-1: rgb(45 212 191);
	--msghub-chart-2: rgb(96 165 250);
	--msghub-chart-3: rgb(192 132 252);
	--msghub-chart-4: rgb(255 170 90);
	--msghub-chart-5: rgb(239 83 80);
	--msghub-chart-6: rgb(168 138 126);
	--msghub-chart-7: rgb(34 211 238);
	--msghub-chart-8: rgb(163 230 53);
	--msghub-chart-9: rgb(251 146 60);
	--msghub-chart-10: rgb(129 140 248);
	--msghub-chart-11: rgb(244 114 182);
	--msghub-chart-12: rgb(253 224 71);
	--msghub-chart-neutral: rgb(77 88 94);

	--msghub-syntax-key: rgb(156 220 254);
	--msghub-syntax-string: rgb(206 145 120);
	--msghub-syntax-number: rgb(181 206 168);
	--msghub-syntax-bool: rgb(86 156 214);
	--msghub-syntax-null: rgb(86 156 214);
	--msghub-syntax-punct: rgb(212 212 212);
	--msghub-syntax-comment: rgb(106 153 85);

	--msghub-surface-hover: rgb(255 255 255 / 0.1);
	--msghub-surface-selected: rgb(255 255 255 / 0.16);
	--msghub-shadow-md: rgb(0 0 0 / 0.4);
	--msghub-shadow-elevated: 0 10px 28px var(--msghub-shadow-md);
}

html[data-msghub-theme='dark'] {
	color-scheme: dark;
}
html:not([data-msghub-theme='dark']) {
	color-scheme: light;
}

html,
body {
	height: 100%;
}
body {
	margin: 0;
	overflow: hidden;
}

/* Base */
.msghub-root,
.msghub-root * {
	box-sizing: border-box;
}

.msghub-root {
	background: var(--msghub-bg);
	color: var(--msghub-text);
	height: 100vh;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	padding: var(--msghub-space-3);
	font: var(--msghub-font-body);
}

.msghub-root a {
	color: inherit;
}

/* Primary navigation (tabs) + connection status */
.msghub-root #msghub-layout {
	flex: 1 1 auto;
	min-height: 0;
	display: flex;
	flex-direction: column;
	gap: var(--msghub-space-3);
}

.msghub-root .msghub-tabs {
	display: flex;
	align-items: center;
	gap: var(--msghub-space-2);
	padding: var(--msghub-space-2);
	border: 1px solid var(--msghub-border);
	border-radius: var(--msghub-radius);
	margin-bottom: var(--msghub-space-3);
}

.msghub-root .msghub-tab {
	display: inline-flex;
	align-items: center;
	padding: 6px 10px;
	border-radius: var(--msghub-radius);
	text-decoration: none;
	font: var(--msghub-font-tab);
	white-space: nowrap;
}

.msghub-root .msghub-tab:hover {
	background: var(--msghub-surface-hover);
}

.msghub-root .msghub-tab.is-active {
	background: transparent;
	color: var(--msghub-accent);
}

.msghub-root .msghub-tab.is-active:hover {
	background: transparent;
}

.msghub-root .msghub-tabs-spacer {
	flex: 1 1 auto;
	min-width: 0;
}

.msghub-root #msghub-connection {
	align-self: flex-end;
	padding: 5px 10px;
	border-radius: 999px;
	border: 1px solid var(--msghub-border);
	font: var(--msghub-font-badge);
	white-space: nowrap;
}

html[data-msghub-layout='tabs'] .msghub-root #msghub-connection {
	position: fixed;
	top: 20px;
	right: 20px;
}

.msghub-root #msghub-connection.online {
	color: var(--msghub-ok);
	border-color: var(--msghub-ok);
	background: var(--msghub-ok-dim);
}

.msghub-root #msghub-connection.offline {
	color: var(--msghub-danger);
	border-color: var(--msghub-danger);
	background: var(--msghub-danger-dim);
}

.msghub-root .msghub-panel[hidden] {
	display: none !important;
}

.msghub-root .msghub-panel {
	flex: 1 1 auto;
	min-height: 0;
	overflow: auto;
	overflow-x: hidden;
	scrollbar-gutter: stable;
}

/* States */
.msghub-root .is-hidden {
	display: none !important;
}

.msghub-root.is-modal-open .msghub-panel {
	overflow: hidden;
}

/* Universal UI infrastructure */
.msghub-root .msghub-toast-host {
	position: fixed;
	right: var(--msghub-space-3);
	bottom: var(--msghub-space-3);
	z-index: 1200;
	display: flex;
	flex-direction: column;
	gap: var(--msghub-space-2);
	align-items: flex-end;
	pointer-events: none;
}

	.msghub-root .msghub-toast {
	pointer-events: auto;
	max-width: min(520px, calc(100vw - 2 * var(--msghub-space-3)));
	background: var(--msghub-bg);
	color: var(--msghub-text);
	border: 1px solid var(--msghub-border);
	border-radius: var(--msghub-radius);
	box-shadow: 0 6px 18px var(--msghub-shadow-md);
	padding: var(--msghub-space-2) var(--msghub-space-3);
		font: var(--msghub-font-body);
	}

	/* Context menu (core primitive; no visible backdrop) */
	.msghub-root .msghub-contextmenu-host {
		position: fixed;
		inset: 0;
		z-index: 1075; /* above overlay (1050), below dialog (1100) */
		pointer-events: none;
	}

	.msghub-root .msghub-contextmenu {
		position: fixed;
		pointer-events: auto;
		min-width: 220px;
		max-width: min(380px, calc(100vw - 2 * var(--msghub-space-3)));
		max-height: min(60vh, calc(100vh - 2 * var(--msghub-space-3)));
		overflow: auto;
		background: var(--msghub-bg);
		color: var(--msghub-text);
		border: 1px solid var(--msghub-border);
		border-radius: var(--msghub-radius);
		box-shadow: var(--msghub-shadow-elevated);
	}

	.msghub-root .msghub-contextmenu-list {
		list-style: none;
		margin: 0;
		padding: var(--msghub-space-1) 0;
	}

	.msghub-root .msghub-contextmenu-item,
	.msghub-root .msghub-contextmenu-heading,
	.msghub-root .msghub-contextmenu-footer {
		width: 100%;
		background: transparent;
		color: inherit;
		font: var(--msghub-font-body);
		text-align: left;
		padding: var(--msghub-space-2) var(--msghub-space-3);
	}

	.msghub-root .msghub-contextmenu-separator {
		height: 1px;
		background: var(--msghub-border-light);
		margin: var(--msghub-space-1) 0;
	}

	.msghub-root .msghub-contextmenu-heading {
		display: flex;
		align-items: center;
		gap: var(--msghub-space-2);
		border: 0;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.msghub-root .msghub-contextmenu-heading-text {
		flex: 1 1 auto;
		min-width: 0;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.msghub-root .msghub-contextmenu-item {
		border: 0;
		cursor: pointer;
	}

	.msghub-root .msghub-contextmenu-item:hover {
		background: var(--msghub-surface-hover);
	}

	.msghub-root .msghub-contextmenu-item.is-submenu-open {
		background: var(--msghub-surface-hover);
	}

	.msghub-root .msghub-contextmenu-item:focus-visible {
		outline: 2px solid var(--msghub-accent);
		outline-offset: -2px;
	}

	.msghub-root .msghub-contextmenu-item:disabled {
		cursor: default;
	}

	.msghub-root .msghub-contextmenu-item:disabled,
	.msghub-root .msghub-contextmenu-heading,
	.msghub-root .msghub-contextmenu-footer {
		color: var(--msghub-muted);
		cursor: default;
	}

	.msghub-root .msghub-contextmenu-heading,
	.msghub-root .msghub-contextmenu-footer {
		font: var(--msghub-font-body-meta);
		padding-top: var(--msghub-space-1);
		padding-bottom: var(--msghub-space-1);
	}

	.msghub-root .msghub-contextmenu-item.is-primary {
		font: var(--msghub-font-body-bold);
	}

	.msghub-root .msghub-contextmenu-item.is-danger {
		color: var(--msghub-danger);
	}

	.msghub-root .msghub-contextmenu-row {
		display: flex;
		align-items: center;
		gap: var(--msghub-space-2);
	}

	.msghub-root .msghub-contextmenu-icon-slot {
		flex: 0 0 auto;
		width: 18px;
		height: 18px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
	}

	.msghub-root .msghub-contextmenu-icon {
		width: 16px;
		height: 16px;
		background-color: var(--msghub-muted);
		-webkit-mask-image: var(--msghub-contextmenu-icon);
		-webkit-mask-repeat: no-repeat;
		-webkit-mask-position: center;
		-webkit-mask-size: 16px 16px;
		mask-image: var(--msghub-contextmenu-icon);
		mask-repeat: no-repeat;
		mask-position: center;
		mask-size: 16px 16px;
	}

	.msghub-root .msghub-contextmenu-label {
		flex: 1 1 auto;
		min-width: 0;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.msghub-root .msghub-contextmenu-meta {
		flex: 0 0 auto;
		display: inline-flex;
		align-items: baseline;
		gap: var(--msghub-space-2);
		color: var(--msghub-muted);
	}

	.msghub-root .msghub-contextmenu-submenu {
		font: var(--msghub-font-tab);
		line-height: var(--msghub-lh-solid);
	}

	.msghub-root .msghub-contextmenu-footer {
		display: flex;
		align-items: center;
		gap: var(--msghub-space-2);
		border: 0;
		padding: var(--msghub-space-2) var(--msghub-space-3);
		border-top: 1px solid var(--msghub-border);
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.msghub-root .msghub-contextmenu-footer-text {
		flex: 1 1 auto;
		min-width: 0;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.msghub-root .msghub-overlay-backdrop,
	.msghub-root .msghub-dialog-backdrop {
		position: fixed;
		inset: 0;
	z-index: 1100;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: var(--msghub-space-3);
	background: var(--msghub-backdrop);
}

.msghub-root .msghub-overlay-backdrop {
	z-index: 1050;
}

.msghub-root .msghub-overlay,
.msghub-root .msghub-dialog {
	width: min(980px, 100%);
	max-height: min(86vh, 100%);
	background: var(--msghub-bg);
	color: var(--msghub-text);
	border: 1px solid var(--msghub-border);
	border-radius: var(--msghub-radius);
	box-shadow: 0 10px 28px var(--msghub-shadow-md);
	display: flex;
	flex-direction: column;
	min-height: 0;
}

.msghub-root .msghub-dialog {
	width: min(520px, 100%);
	max-height: min(70vh, 100%);
}

.msghub-root .msghub-overlay-head {
	display: flex;
	align-items: center;
	gap: var(--msghub-space-2);
	padding: var(--msghub-space-2) var(--msghub-space-3);
	border-bottom: 1px solid var(--msghub-border);
}

.msghub-root .msghub-overlay-title {
	flex: 1 1 auto;
	min-width: 0;
	font: var(--msghub-font-tab);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.msghub-root .msghub-overlay-body {
	flex: 1 1 auto;
	min-height: 0;
	overflow: auto;
	padding: var(--msghub-space-3);
}

.msghub-root .msghub-dialog-title {
	margin: 0;
	padding: var(--msghub-space-3) var(--msghub-space-3) 0 var(--msghub-space-3);
	font: var(--msghub-font-tab);
}

.msghub-root .msghub-dialog-body {
	padding: var(--msghub-space-2) var(--msghub-space-3);
	overflow: auto;
}

.msghub-root .msghub-dialog-actions {
	display: flex;
	justify-content: flex-end;
	gap: var(--msghub-space-2);
	padding: var(--msghub-space-2) var(--msghub-space-3) var(--msghub-space-3) var(--msghub-space-3);
	border-top: 1px solid var(--msghub-border);
}

.msghub-root .msghub-overlay-body pre {
	margin: 0;
	font-family: var(--msghub-font-mono);
	font-size: var(--msghub-fs-sm);
	line-height: var(--msghub-lh-normal);
	white-space: pre;
}
